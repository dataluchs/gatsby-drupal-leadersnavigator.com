import React, { useRef, useEffect } from "react"
import styled from "styled-components"
import { graphql, useStaticQuery, Link } from "gatsby"
import Img from "gatsby-image"
import { Container } from "../Global"
import Typed from 'react-typed';
import 'react-typed/dist/animatedCursor.css';
import KnowletCard from '../cards/KnowletCard'
import PropTypes from "prop-types"

const KnowletsList = () => {

  const data = useStaticQuery(graphql`
      
            {
      allNodeKnowlet(sort: { order: DESC, fields: created }) {
        nodes {
          created
          id
          field_image {
            alt
            title
          }
          title
          path {
            alias
          }
        }
      }
    }
  
    `)

  const knowlets = data.allNodeKnowlet.nodes
  console.log(knowlets)
  return (

    <KnowletsListWrapper id="top">

      <Container>
        <h2> Explore knowlets </h2>
        <p> Our Knowlets are small pieces of information explaining specific topics. Check them out! </p>
        <KnowletsListWrapperInner>
          <div style={{ display: 'flex', flexWrap: 'wrap' }}>
            {knowlets.map(knowlet => (
              <Link to={knowlet.path.alias}>
                <KnowletCard
                  title={knowlet.title}
                  path={knowlet.path.alias}
                />
              </Link>
            ))}
          </div>
        </KnowletsListWrapperInner>
      </Container>
    </KnowletsListWrapper>

  )
}


KnowletsList.propTypes = {
  data: PropTypes.object.isRequired,
}

export default KnowletsList


const KnowletsListWrapper = styled.header`
background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:svgjs='http://svgjs.com/svgjs' width='1440' height='560' preserveAspectRatio='none' viewBox='0 0 1440 560'%3e%3cg mask='url(%26quot%3b%23SvgjsMask1003%26quot%3b)' fill='none'%3e%3cpath d='M52.75 140C50.58 101.14 14.46 109.71 0 71.32C-11.91 39.71 -23.62 12.04 0 0C46.38 -23.62 70 0 140 0C210 0 210 0 280 0C350 0 350 0 420 0C490 0 490 0 560 0C630 0 630 0 700 0C770 0 770 0 840 0C896.47 0 932.7 -31.05 952.95 0C978.35 38.95 921.63 79.7 931.3 140C935.16 164.06 955.79 168.72 980 168.72C1003.47 168.72 1010.73 161.47 1026.67 140C1073.36 77.11 1062.52 64.11 1105.26 0C1109.18 -5.89 1112.63 0 1120 0C1190 0 1190 0 1260 0C1330 0 1330 0 1400 0C1470 0 1499.75 -29.75 1540 0C1569.75 21.99 1550.86 55.82 1540 103.48C1534.91 125.82 1508.1 119.15 1508.1 140C1508.1 175.59 1530.98 176.79 1540 216.36C1546.93 246.79 1540 248.18 1540 280C1540 317.5 1556.79 355 1540 355C1514.79 355 1501.83 311.01 1456 280C1431.83 263.65 1426.54 260.28 1400 260.28C1385.08 260.28 1375.47 264.63 1373.08 280C1363.06 344.49 1400.43 359.75 1375.19 420C1343.89 494.75 1319.15 486.83 1260 550C1253.6 556.83 1253.3 559.34 1244.09 560C1183.3 564.34 1182.05 560 1120 560C1050 560 1050 560 980 560C910 560 910 560 840 560C770 560 770 560 700 560C630 560 630 560 560 560C490 560 490 560 420 560C350 560 350 560 280 560C210 560 210 560 140 560C79.69 560 67.73 577.41 19.38 560C-2.27 552.21 3.64 535.92 0 509.6C-6.05 465.92 0 464.8 0 420C0 369.09 -4.19 368.46 0 318.18C1.64 298.46 6 299.14 11.67 280C32.38 210.05 56.41 205.48 52.75 140' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M280 225.22C262.9 225.22 250 250.85 250 280C250 333.02 262.29 389.57 280 389.57C298.29 389.57 322 331.74 322 280C322 249.56 298.9 225.22 280 225.22' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M700 157.5C652.46 157.5 638.11 212 610.91 280C585.61 343.25 570.26 369.66 595 420C614.81 460.31 645.39 453.97 700 461.31C767.89 470.44 775.41 468.58 840 452.94C860.69 447.93 870.55 439.82 870.55 420C870.55 376.68 859.62 371.22 840 326.67C828.79 301.22 826.74 301.57 808.89 280C756.74 216.98 751.45 157.5 700 157.5' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M1400 560C1400 548.68 1486.2 515.79 1540 515.79C1556.2 515.79 1556.8 554.69 1540 560C1486.8 576.8 1400 570.79 1400 560' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M103.48 140C87.3 66.25 50.18 73.17 0 5.28C-1.56 3.17 -2.54 0.1 0 0C67.46 -2.54 70 0 140 0C210 0 210 0 280 0C350 0 350 0 420 0C490 0 490 0 560 0C630 0 630 0 700 0C770 0 770 0 840 0C876.59 0 910.7 -22.8 913.18 0C918.31 47.2 885.28 70.51 855.22 140C848.69 155.09 849.41 169.17 840 169.17C828.84 169.17 828.26 153.37 814.07 140C758.26 87.45 754.86 37.33 700 37.33C649.7 37.33 649.42 86.65 603.75 140C579.42 168.42 582.41 170.83 560 200.87C530.2 240.83 522.38 236.32 499.33 280C464.56 345.89 476.49 352.97 444.35 420C436.82 435.7 432.04 445.45 420 445.45C408.2 445.45 400.57 436.28 396.67 420C380.74 353.55 407.21 342.41 380.33 280C348.88 206.98 325.15 149.13 280 149.13C239.15 149.13 247.48 216.65 208.33 280C177.48 329.92 175.95 375.67 140 375.67C101.92 375.67 68.67 334.14 60.28 280C50.41 216.3 117.44 203.61 103.48 140' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M1099.58 140C1114.65 128.56 1108.6 122.83 1120 107.33C1160.09 52.83 1153.41 37.68 1202.56 0C1223.41 -15.98 1231.28 0 1260 0C1330 0 1330 0 1400 0C1470 0 1489.16 -19.16 1540 0C1559.16 7.22 1551.92 30.85 1540 52.75C1513.82 100.85 1502.18 96.62 1463.8 140C1432.18 175.74 1435.53 179.51 1400 210.99C1356.52 249.51 1321.35 232.88 1305.77 280C1286.8 337.38 1343.96 357.2 1330.89 420C1321.07 467.2 1300.48 465.93 1260 500C1217.31 535.93 1214.72 538.5 1164.55 560C1144.72 568.5 1142.28 560 1120 560C1050 560 1050 560 980 560C910 560 910 560 840 560C770 560 770 560 700 560C653.34 560 606.67 569.87 606.67 560C606.67 549.21 650.82 526.79 700 518.69C767.48 507.58 781.14 546.38 840 521.57C898.23 497.03 922.68 478.48 934.18 420C946.43 357.69 874.57 338.26 887.5 280C897.48 235.05 932.51 244.94 980 213.59C1038.55 174.94 1044.65 181.69 1099.58 140' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M73.23 560C73.23 533.04 95.36 484.53 140 473.2C198.75 458.28 216.05 479.18 280 507.5C314.05 522.58 336 544.82 336 560C336 571.07 308 560 280 560C210 560 210 560 140 560C106.62 560 73.23 576.44 73.23 560' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M394.07 140C362.26 70.26 323.36 44.4 331.58 0C336.32 -25.6 375.79 0 420 0C490 0 490 0 560 0C599.49 0 638.97 -16.97 638.97 0C638.97 24.65 605.08 48.93 560 83.24C513.1 118.93 500.51 104.04 455 140C430.51 159.35 435.78 193.85 420 193.85C405.32 193.85 406.47 167.19 394.07 140' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M840 71.71C808.35 71.71 762.63 20.68 762.63 0C762.63 -15.17 801.32 0 840 0C856.7 0 873.41 -10.65 873.41 0C873.41 25.21 863.74 71.71 840 71.71' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M1216.92 140C1216.92 106.76 1235.83 105.05 1260 74.12C1290.53 35.05 1286.11 21.29 1326.32 0C1356.11 -15.77 1363.16 0 1400 0C1470 0 1471 -1 1540 0C1541 0.01 1540.66 1.26 1540 2.03C1480.41 71.26 1479.88 71.13 1419.49 140C1409.88 150.96 1413.12 155.93 1400 161.69C1333.37 190.93 1318.87 216.97 1260 210C1227.33 206.13 1216.92 174.7 1216.92 140' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M108.89 280C108.89 234.34 125.47 182.61 140 182.61C154.36 182.61 166.67 233.68 166.67 280C166.67 301.04 154.03 317.33 140 317.33C125.14 317.33 108.89 301.7 108.89 280' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M950 280C950 264.42 962.7 258.46 980 258.46C1030.2 258.46 1085 255.89 1085 280C1085 310.87 1020.17 368.42 980 368.42C952.67 368.42 950 319.4 950 280' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M1194.38 420C1194.38 383.06 1235.02 328.7 1260 328.7C1281.12 328.7 1286.58 377.33 1286.58 420C1286.58 437.98 1276.46 450 1260 450C1230.36 450 1194.38 443.71 1194.38 420' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M127.08 560C127.08 554.78 131.16 543.2 140 543.2C159.73 543.2 184.21 555.66 184.21 560C184.21 564.06 162.11 560 140 560C133.54 560 127.08 563.18 127.08 560' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3cpath d='M897.04 560C897.04 530.46 938.52 462.61 980 462.61C1021.48 462.61 1062.96 530.46 1062.96 560C1062.96 579.16 1021.48 560 980 560C938.52 560 897.04 579.16 897.04 560' stroke='rgba(209%2c 209%2c 209%2c 1)' stroke-width='2'%3e%3c/path%3e%3c/g%3e%3cdefs%3e%3cmask id='SvgjsMask1003'%3e%3crect width='1440' height='560' fill='white'%3e%3c/rect%3e%3c/mask%3e%3c/defs%3e%3c/svg%3e");  box-shadow:inset 0 0 0 2000px rgba(255, 255, 250, 0.6);
  background-size: cover;
  padding: 40px 0px;
  z-index:-1;
  position: relative;
  text-align: center;
  h1 {
    color:#111;
  }
  p {
    color: gray;
  }
`

const KnowletsListWrapperInner = styled.div`
  padding: 20px 0px;
`
